(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{10:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return d}));var r=n(2),c=Object(r.b)("contact/fetchContactRequest"),a=Object(r.b)("contact/fetchContactSuccess"),o=Object(r.b)("contact/fetchContactError"),s=Object(r.b)("contact/addContactRequest"),i=Object(r.b)("contact/addContactSuccess"),u=Object(r.b)("contact/addContactError"),b=Object(r.b)("contact/deleteContactRequest"),l=Object(r.b)("contact/deleteContactSuccess"),j=Object(r.b)("contact/deleteContactError"),d=(Object(r.b)("contact/delete"),Object(r.b)("contact/changeFilter"))},20:function(e,t,n){e.exports={Link:"Navigation_Link__19Yeo",LinkActive:"Navigation_LinkActive__3-xry",Container:"Navigation_Container__2bHY4",HeaderTitle:"Navigation_HeaderTitle__153Ms"}},21:function(e,t,n){e.exports={Container:"UserMenu_Container__2vAl1",ContainerUserCorner:"UserMenu_ContainerUserCorner__1fqoB",UserName:"UserMenu_UserName__1OJ4Q",LogOutBtn:"UserMenu_LogOutBtn__3vwfa",Avatar:"UserMenu_Avatar__2MFq8"}},22:function(e,t,n){e.exports={Link:"AuthNav_Link__2Ewqv",LinkActive:"AuthNav_LinkActive__vCtGp",Container:"AuthNav_Container__3GRzr",Registration:"AuthNav_Registration__1MzAW"}},27:function(e,t,n){"use strict";var r=n(16),c=n.n(r),a=n(26),o=n(18),s=n.n(o),i=n(4),u=n(36);n(57);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var b=function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){s.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(i.a.registerRequest()),t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:r=t.sent,b(r.data.token),n(i.a.registerSuccess(r.data)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n(i.a.registerError(t.t0.message)),u.b.error("This user is already registered",{position:"top-center",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(i.a.loginRequest()),t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:r=t.sent,b(r.data.token),n(i.a.loginSuccess(r.data)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n(i.a.loginError(t.t0.message)),u.b.error("Login data is incorrect. Please check data and try again",{position:"top-center",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(i.a.logoutRequest()),e.prev=1,e.next=4,s.a.post("/users/logout");case 4:l(),t(i.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(i.a.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return b(a),t(i.a.getCurrentUserRequest()),e.prev=5,e.next=8,s.a.get("/users/current");case 8:o=e.sent,t(i.a.getCurrentUserSuccess(o.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(i.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}}},4:function(e,t,n){"use strict";var r=n(2),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),s=Object(r.b)("auth/loginRequest"),i=Object(r.b)("auth/loginSuccess"),u=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),l=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),O=Object(r.b)("auth/getCurrentUserSuccess"),p=Object(r.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:o,loginRequest:s,loginSuccess:i,loginError:u,logoutRequest:b,logoutSuccess:l,logoutError:j,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:p}},40:function(e,t,n){e.exports={Container:"AppBar_Container__19nk5",Header:"AppBar_Header__SlRml"}},53:function(e,t,n){e.exports={Container:"Container_Container__3x5dW"}},62:function(e,t,n){},88:function(e,t,n){e.exports={Container:"App_Container__2yW8r",HeaderFadeAppear:"App_HeaderFadeAppear__2Cu-M",HeaderFadeAppearActive:"App_HeaderFadeAppearActive__2oDWc",ContactListFadeEnter:"App_ContactListFadeEnter__2HI22",ContactListFadeEnterActive:"App_ContactListFadeEnterActive__1AGd1",ContactListFadeExit:"App_ContactListFadeExit__1KrOT",ContactListFadeExitActive:"App_ContactListFadeExitActive__2ANA3",ContactListFadeAppear:"App_ContactListFadeAppear__1V9Ig",ContactListFadeAppearActive:"App_ContactListFadeAppearActive__2SZ6Y"}},89:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r,c,a,o,s,i,u=n(0),b=n(24),l=n.n(b),j=(n(62),n(41)),d=n(42),O=n(44),p=n(43),h=n(53),g=n.n(h),f=n(1),v=function(e){var t=e.children;return Object(f.jsx)("div",{className:g.a.Container,children:t})},_=n(20),C=n.n(_),x=n(15),m=n(8),A=function(e){return e.auth.isAuthenticated},k=function(e){return e.auth.user.name},L=Object(m.b)((function(e){return{isAuthenticated:A(e)}}),null)((function(e){var t=e.isAuthenticated;return Object(f.jsxs)("nav",{className:C.a.Container,children:[Object(f.jsx)(x.b,{to:"/",exact:!0,className:C.a.Link,activeClassName:C.a.LinkActive,children:Object(f.jsx)("h3",{className:C.a.HeaderTitle,children:"Home"})}),t&&Object(f.jsx)(x.b,{to:"/contacts",exact:!0,className:C.a.Link,activeClassName:C.a.LinkActive,children:Object(f.jsx)("h3",{className:C.a.HeaderTitle,children:"Contacts"})})]})})),N=n.p+"static/media/avatar.e35f672d.svg",E=n.p+"static/media/logout-icon.fee70861.svg",S=n(27),y=n(21),U=n.n(y),R={onLogout:S.a.logout},q=Object(m.b)((function(e){return{name:k(e),avatar:N,logout:E}}),R)((function(e){var t=e.avatar,n=e.logout,r=e.name,c=e.onLogout;return Object(f.jsxs)("div",{className:U.a.Container,children:[Object(f.jsx)("img",{src:t,alt:"",width:"42",height:"42",className:U.a.Avatar}),Object(f.jsxs)("div",{className:U.a.ContainerUserCorner,children:[Object(f.jsxs)("h2",{className:U.a.UserName,children:["Welcome ",r]}),Object(f.jsx)("button",{type:"button",onClick:c,className:U.a.LogOutBtn,children:Object(f.jsx)("img",{src:n,alt:"",width:"24",height:"24",className:U.a.Avatar})})]})]})})),w=n(22),F=n.n(w),H=function(){return Object(f.jsxs)("div",{className:F.a.Container,children:[Object(f.jsx)(x.b,{to:"/register",exact:!0,className:F.a.Link,activeClassName:F.a.LinkActive,children:Object(f.jsx)("h3",{className:F.a.Registration,children:"Registration"})}),Object(f.jsx)(x.b,{to:"/login",exact:!0,className:F.a.Link,activeClassName:F.a.LinkActive,children:Object(f.jsx)("h3",{children:"Login"})})]})},T=n(40),M=n.n(T),z=(n.p,Object(m.b)((function(e){return{isAuthenticated:A(e)}}),null)((function(e){var t=e.isAuthenticated;return Object(f.jsx)("div",{className:M.a.Container,children:Object(f.jsxs)("header",{className:M.a.Header,children:[Object(f.jsx)(L,{}),t?Object(f.jsx)(q,{}):Object(f.jsx)(H,{})]})})}))),B=(n(88),n(89),n(6)),D=n(19),P=n(31),W=Object(m.b)((function(e){return{isAuthenticated:A(e)}}),null)((function(e){var t=e.component,n=e.isAuthenticated,r=e.reDirectTo,c=Object(P.a)(e,["component","isAuthenticated","reDirectTo"]);return Object(f.jsx)(B.b,Object(D.a)(Object(D.a)({},c),{},{render:function(e){return n?Object(f.jsx)(t,Object(D.a)({},e)):Object(f.jsx)(B.a,{to:r})}}))})),G=Object(m.b)((function(e){return{isAuthenticated:A(e)}}),null)((function(e){var t=e.component,n=e.isAuthenticated,r=e.reDirectTo,c=Object(P.a)(e,["component","isAuthenticated","reDirectTo"]);return Object(f.jsx)(B.b,Object(D.a)(Object(D.a)({},c),{},{render:function(e){return n&&c.restricted?Object(f.jsx)(B.a,{to:r}):Object(f.jsx)(t,Object(D.a)({},e))}}))})),J=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,142))})),Y=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,136))})),I=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,137))})),K=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(5)]).then(n.bind(null,139))})),Q=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.onRefreshUser()}},{key:"render",value:function(){return Object(f.jsxs)(v,{children:[Object(f.jsx)(z,{}),Object(f.jsx)(u.Suspense,{fallback:Object(f.jsx)("h1",{children:"Loading..."}),children:Object(f.jsxs)(B.d,{children:[Object(f.jsx)(G,{exact:!0,path:"/",component:J}),Object(f.jsx)(G,{path:"/register",restricted:!0,component:I,reDirectTo:"/contacts"}),Object(f.jsx)(G,{path:"/login",restricted:!0,component:Y,reDirectTo:"/contacts"}),Object(f.jsx)(W,{exact:!0,path:"/contacts",component:K,reDirectTo:"/login"})]})})]})}}]),n}(u.Component),V={onRefreshUser:S.a.getCurrentUser},Z=Object(m.b)(null,V)(Q),X=n(30),$=n(2),ee=n(3),te=n(7),ne=n(10),re=Object($.c)([],(r={},Object(ee.a)(r,ne.j,(function(e,t){return t.payload})),Object(ee.a)(r,ne.c,(function(e,t){var n=t.payload;return[].concat(Object(X.a)(e),[n])})),Object(ee.a)(r,ne.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),ce=Object($.c)("",Object(ee.a)({},ne.d,(function(e,t){return t.payload}))),ae=Object($.c)(!1,(c={},Object(ee.a)(c,ne.b,(function(){return!0})),Object(ee.a)(c,ne.c,(function(){return!1})),Object(ee.a)(c,ne.a,(function(){return!1})),Object(ee.a)(c,ne.f,(function(){return!0})),Object(ee.a)(c,ne.g,(function(){return!1})),Object(ee.a)(c,ne.e,(function(){return!1})),Object(ee.a)(c,ne.i,(function(){return!0})),Object(ee.a)(c,ne.j,(function(){return!1})),Object(ee.a)(c,ne.h,(function(){return!1})),c)),oe=Object($.c)(null,{}),se=Object(te.c)({items:re,filter:ce,loading:ae,error:oe}),ie=n(17),ue=n(32),be=n.n(ue),le=n(55),je=n.n(le),de=n(4),Oe={name:null,email:null},pe=Object($.c)(Oe,(a={},Object(ee.a)(a,de.a.registerSuccess,(function(e,t){return t.payload.user})),Object(ee.a)(a,de.a.loginSuccess,(function(e,t){return t.payload.user})),Object(ee.a)(a,de.a.logoutSuccess,(function(){return Oe})),Object(ee.a)(a,de.a.getCurrentUserSuccess,(function(e,t){return t.payload})),a)),he=Object($.c)(null,(o={},Object(ee.a)(o,de.a.registerSuccess,(function(e,t){return t.payload.token})),Object(ee.a)(o,de.a.loginSuccess,(function(e,t){return t.payload.token})),Object(ee.a)(o,de.a.logoutSuccess,(function(e,t){t.payload;return null})),o)),ge=function(e,t){return t.payload},fe=Object($.c)(!1,(s={},Object(ee.a)(s,de.a.registerError,ge),Object(ee.a)(s,de.a.loginError,ge),Object(ee.a)(s,de.a.logoutError,ge),Object(ee.a)(s,de.a.getCurrentUserError,ge),s)),ve=Object($.c)(!1,(i={},Object(ee.a)(i,de.a.registerSuccess,(function(){return!0})),Object(ee.a)(i,de.a.loginSuccess,(function(){return!0})),Object(ee.a)(i,de.a.getCurrentUserSuccess,(function(){return!0})),Object(ee.a)(i,de.a.registerError,(function(){return!1})),Object(ee.a)(i,de.a.loginError,(function(){return!1})),Object(ee.a)(i,de.a.getCurrentUserError,(function(){return!1})),Object(ee.a)(i,de.a.logoutSuccess,(function(){return!1})),i)),_e=Object(te.c)({user:pe,isAuthenticated:ve,token:he,error:fe}),Ce=(be.a,be.a,[].concat(Object(X.a)(Object($.d)({serializableCheck:{ignoredActions:[ie.a,ie.f,ie.b,ie.c,ie.d,ie.e]}})),[je.a])),xe={key:"auth",storage:be.a,whitelist:["token"]},me=Object($.a)({reducer:{auth:Object(ie.g)(xe,_e),contacts:se},middleware:Ce,devTools:!1}),Ae={store:me,persistor:Object(ie.h)(me)},ke=n(56);l.a.render(Object(f.jsx)(m.a,{store:Ae.store,children:Object(f.jsx)(ke.a,{loading:"Loading",persistor:Ae.persistor,children:Object(f.jsx)(x.a,{children:Object(f.jsx)(Z,{})})})}),document.querySelector("#root"))}},[[92,2,3]]]);
//# sourceMappingURL=main.54f96e21.chunk.js.map